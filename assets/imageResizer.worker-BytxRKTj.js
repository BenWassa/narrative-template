(function(){"use strict";async function c(n,t,a,r){const s=await createImageBitmap(n),o=new OffscreenCanvas(t,a),e=o.getContext("2d");if(!e)throw new Error("Failed to get canvas context");e.drawImage(s,0,0,t,a);const i=await o.convertToBlob({type:"image/jpeg",quality:r});return s.close(),i}self.onmessage=async n=>{const{id:t,blob:a,width:r,height:s,quality:o}=n.data;try{const e=await c(a,r,s,o);self.postMessage({id:t,blob:e})}catch(e){self.postMessage({id:t,error:e instanceof Error?e.message:String(e)})}}})();
